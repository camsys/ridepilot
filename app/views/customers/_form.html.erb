<%= form_for(@customer) do |f| %>
  <% if @customer.errors.any? %>
    <div id="error_explanation">
      <h2><%= translate_helper("customer_form_error_message", count: @customer.errors.count)%></h2>
      <ul>
      <% @customer.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <% if @dup %>
    <label for="ignore_dups">translate_helper("ignore_duplicates")</label>
    <%= check_box_tag :ignore_dups %><br/>
  <% end %>

  <fieldset class="new-customer">

    <div class="group">
      <%= f.check_box :group %>
      <%= f.label :group, translate_helper("group") %>
    </div>

    <ol class="section first">
      <li class="selfclear firstname">
        <%= f.label :first_name, translate_helper("first_name") %>
        <%= f.text_field :first_name %>
      </li>

      <li class="selfclear middlename">
        <%= f.label :middle_initial, translate_helper("middle_initial") %>
        <%= f.text_field :middle_initial %>
      </li>

      <li class="selfclear lastname">
        <%= f.label :last_name, translate_helper("last_name") %>
        <%= f.text_field :last_name %>
      </li>

      <li class="selfclear">
        <%= f.label :phone_number_1, translate_helper("phone_number") %>
        <%= f.text_field :phone_number_1 %>
      </li>

      <li class="selfclear">
        <%= f.label :phone_number_2, translate_helper("alternate_phone_number") %>
        <%= f.text_field :phone_number_2 %>
      </li>

      <li class="selfclear">
        <%= f.label :email, translate_helper("email") %>
        <%= f.text_field :email %>
      </li>

      <li class="selfclear birth_date">
        <%= f.label :birth_date, translate_helper("date_of_birth") %>
        <%- date_order_parameters = translate_helper("date_order_parameter").split(",").collect do |param| param.to_sym end %>
        <%= f.date_select :birth_date, :start_year => 1896, :use_short_month => true, :include_blank => true, order: date_order_parameters  %>
      </li>

      <li class="selfclear ethnicity">
        <%= f.label :ethnicity, translate_helper("ethnicity") %>
        <%= f.select :ethnicity, @ethnicity_names %>
      </li>
    </ol>

    <ol class="section second">
      <%= f.fields_for :address, @customer.address do |address_form| %>
        <%= render 'addresses/form', :form=>address_form, :editing_address => false %>
      <% end %>

      <li class="selfclear">
        <%= f.label :mobility_id, translate_helper("mobility") %>
        <%= f.collection_select :mobility_id, @mobilities, :id, :name %>
      </li>

      <li class="selfclear">
        <%= f.label :mobility_notes, translate_helper("mobility_notes") %>
        <%= f.text_area :mobility_notes %>
      </li>

      <li class="selfclear">
        <%= f.label :medicaid_eligible, translate_helper("medicaid_eligible") %>
        <%= f.check_box :medicaid_eligible %>
      </li>

      <li class="selfclear">
        <%= f.label :ada_eligible, translate_helper("ada_eligible") %>
        <%= f.check_box :ada_eligible %>
      </li>
    </ol>

    <ol class="section third">
      <li class="selfclear">
        <%= f.label :default_service_level, translate_helper("default_service_level") %>
        <%= f.select :service_level_id, @service_levels, :include_blank => true %>
      </li>

      <li class="selfclear">
        <%= f.label :default_funding_source_id, translate_helper("default_funding_source") %>
        <%= f.collection_select :default_funding_source_id, @funding_sources, :id, :name, :include_blank => true %>
      </li>

      <li class="selfclear">
        <%= f.label :prime_number, translate_helper("prime_number") %>
        <%= f.text_field :prime_number %>
      </li>

      <li class="selfclear">
        <%= f.label :emergency_contact_notes, translate_helper("emergency_contact_notes") %>
        <%= f.text_area :emergency_contact_notes %>
      </li>

      <li class="selfclear">
        <%= f.label :private_notes, translate_helper("private_notes") %>
        <%= f.text_area :private_notes %>
      </li>

      <li class="selfclear">
        <%= f.label :public_notes, translate_helper("public_notes") %>
        <%= f.text_area :public_notes %>
      </li>

      <% if @customer.inactivated_date %>
      <li class="selfclear">
        <%= f.label :inactivated_reason, translate_helper("inactivated_reason") %>
        <%= f.text_field :inactivated_reason %>
      </li>
      <% end %>
    </ol>

    <div class="actions">
      <%= f.submit %>
    </div>
  </fieldset>

<% end %>
